<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Master</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-th"></i> Sudoku Master</h1>
            <div class="header-controls">
                <div class="timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer">00:00</span>
                    <button class="btn btn-secondary btn-compact" id="pauseBtn" title="Pause game">
                        <i class="fas fa-pause"></i>
                    </button>
                </div>
                <div class="player-info">
                    <div class="player-name" title="Current player">
                        <i class="fas fa-user"></i>
                        <span id="currentPlayerName">—</span>
                    </div>
                    <div class="best-time" title="Best time for this player">
                        <i class="fas fa-trophy"></i>
                        <span id="bestTime">—</span>
                    </div>
                    <button class="btn btn-secondary btn-compact" id="openDashboard" title="Open dashboard">
                        <i class="fas fa-chart-pie"></i>
                        Dashboard
                    </button>
                    <button class="btn btn-secondary btn-compact" id="soundToggle" title="Toggle sound effects">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <button class="btn btn-secondary btn-compact" id="themeButton" title="Change theme">
                        <i class="fas fa-palette"></i>
                        Theme
                    </button>
                    <button class="btn btn-secondary btn-compact" id="authButton" title="Login or Register">
                        <i class="fas fa-right-to-bracket"></i>
                        Login
                    </button>
                    <button class="btn btn-danger btn-compact" id="logoutButton" title="Logout" style="display:none">
                        <i class="fas fa-right-from-bracket"></i>
                        Logout
                    </button>
                </div>
                <div class="difficulty-selector">
                    <label for="difficulty">Difficulty:</label>
                    <select id="difficulty">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                        <option value="expert">Expert</option>
                    </select>
                </div>
                <div class="difficulty-selector" title="Play today's daily challenge">
                    <button class="btn btn-secondary btn-compact" id="dailyPuzzleBtn">
                        <i class="fas fa-calendar-star"></i> Daily Challenge
                    </button>
                </div>
                
            </div>
        </header>

        <main class="game-container">
            <div id="dailyQuizBanner" class="info-banner" style="display:none"></div>
            <div class="game-board">
                <div class="sudoku-grid" id="sudokuGrid"></div>
                <div class="game-blur-overlay" id="gameBlur"></div>
            </div>
            
            <div class="game-controls">
                <div class="number-pad">
                    <button class="number-btn" data-number="1">1</button>
                    <button class="number-btn" data-number="2">2</button>
                    <button class="number-btn" data-number="3">3</button>
                    <button class="number-btn" data-number="4">4</button>
                    <button class="number-btn" data-number="5">5</button>
                    <button class="number-btn" data-number="6">6</button>
                    <button class="number-btn" data-number="7">7</button>
                    <button class="number-btn" data-number="8">8</button>
                    <button class="number-btn" data-number="9">9</button>
                    <button class="number-btn clear" data-number="0">
                        <i class="fas fa-eraser"></i>
                    </button>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="newGame">
                        <i class="fas fa-plus"></i> New Game
                    </button>
                    <button class="btn btn-secondary" id="hint">
                        <i class="fas fa-lightbulb"></i> Hint
                    </button>
                    <button class="btn btn-secondary" id="solve">
                        <i class="fas fa-magic"></i> Solve
                    </button>
                    <button class="btn btn-danger" id="reset">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                    <button class="btn btn-secondary" id="openAchievements2">
                        <i class="fas fa-medal"></i> Achievements
                    </button>
                    <button class="btn btn-secondary" id="openLeaderboard2">
                        <i class="fas fa-crown"></i> Leaderboard
                    </button>
                </div>
            </div>
        </main>

        <div class="game-info">
            <div class="stats">
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span class="stat-value score-value" id="currentScore">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Mistakes:</span>
                    <span class="stat-value" id="mistakes">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Hints Used:</span>
                    <span class="stat-value" id="hintsUsed">0</span>
                </div>
            </div>
        </div>

        <!-- Modal for game completion -->
        <div class="modal" id="completionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-trophy"></i> Congratulations!</h2>
                </div>
                <div class="modal-body">
                    <p>You completed the Sudoku puzzle!</p>
                    <div class="completion-stats">
                        <div class="completion-stat">
                            <span>Time:</span>
                            <span id="finalTime">00:00</span>
                        </div>
                        <div class="completion-stat">
                            <span>Mistakes:</span>
                            <span id="finalMistakes">0</span>
                        </div>
                        <div class="completion-stat">
                            <span>Hints Used:</span>
                            <span id="finalHints">0</span>
                        </div>
                        <div class="completion-stat score-breakdown">
                            <span>Final Score:</span>
                            <span id="finalScore" class="final-score-value">0</span>
                        </div>
                        <div id="scoreBreakdown" class="score-details"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="playAgain">Play Again</button>
                    <button class="btn btn-secondary" id="closeModal">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Auth Modal -->
        <div class="modal" id="authModal">
            <div class="modal-content" style="max-width:480px">
                <div class="modal-header">
                    <h2><i class="fas fa-user-lock"></i> Account</h2>
                </div>
                <div class="modal-body">
                    <div class="leaderboard-tabs" style="justify-content:center">
                        <button class="tab-btn active" data-auth-tab="login">Login</button>
                        <button class="tab-btn" data-auth-tab="register">Register</button>
                    </div>
                    <form id="loginForm" class="auth-form" autocomplete="on">
                        <div class="form-field">
                            <input id="loginUsername" type="text" placeholder="Username" required>
                        </div>
                        <div class="form-field">
                            <input id="loginPassword" type="password" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">
                            <i class="fas fa-right-to-bracket"></i> Login
                        </button>
                    </form>
                    <form id="registerForm" class="auth-form" style="display:none" autocomplete="on">
                        <div class="form-field">
                            <input id="regUsername" type="text" placeholder="Username (3-20 chars, letters/numbers/_)" required>
                        </div>
                        <div class="form-field">
                            <input id="regPassword" type="password" placeholder="Password (min 4 chars)" required>
                            <div id="passwordStrength" class="password-strength" style="display:none"></div>
                        </div>
                        <button type="submit" class="btn btn-secondary" style="width:100%">
                            <i class="fas fa-user-plus"></i> Create Account
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeAuth">Close</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Modal -->
        <div class="modal" id="dashboardModal">
            <div class="modal-content dashboard-content">
                <div class="modal-header">
                    <h2><i class="fas fa-chart-line"></i> Player Dashboard</h2>
                    <div class="dashboard-subtitle" id="dashboardPlayer">Guest</div>
                </div>
                <div class="modal-body">
                    <div class="dashboard-horizontal-layout">
                        <div class="dashboard-left-section">
                            <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-icon streak-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-value" id="dashStreak">0</div>
                                <div class="card-label">Day Streak</div>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon score-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-value" id="dashTotalScore">0</div>
                                <div class="card-label">Total Score</div>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon games-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-value" id="dashTotalGames">0</div>
                                <div class="card-label">Games Won</div>
                            </div>
                        </div>
                        <div class="dashboard-card">
                            <div class="card-icon time-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="card-content">
                                <div class="card-value" id="dashAvgTime">--:--</div>
                                <div class="card-label">Avg Time</div>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-stats-section">
                        <h3 class="section-title">Detailed Statistics</h3>
                        <div class="stats-table" id="detailedStats"></div>
                    </div>
                        </div>
                        <div class="dashboard-right-section">
                            <div class="dashboard-chart-section">
                                <h3 class="section-title">Performance by Difficulty</h3>
                                <canvas id="difficultyChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeDashboard">Close</button>
                </div>
            </div>
        </div>

        <!-- Achievements Modal -->
        <div class="modal" id="achievementsModal">
            <div class="modal-content achievements-content">
                <div class="modal-header">
                    <h2><i class="fas fa-medal"></i> Achievements</h2>
                </div>
                <div class="modal-body">
                    <div id="achievementsList" class="achievements-list"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeAchievements">Close</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div class="modal" id="leaderboardModal">
            <div class="modal-content leaderboard-content">
                <div class="modal-header">
                    <h2><i class="fas fa-crown"></i> Leaderboard</h2>
                </div>
                <div class="modal-body">
                    <div class="leaderboard-tabs">
                        <button class="tab-btn active" data-diff="easy">Easy</button>
                        <button class="tab-btn" data-diff="medium">Medium</button>
                        <button class="tab-btn" data-diff="hard">Hard</button>
                        <button class="tab-btn" data-diff="expert">Expert</button>
                    </div>
                    <div id="leaderboardList" class="leaderboard-list"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeLeaderboard">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Pause Overlay -->
        <div class="pause-overlay" id="pauseOverlay">
            <div class="pause-content">
                <div class="pause-icon">
                    <i class="fas fa-pause-circle"></i>
                </div>
                <h2>Game Paused</h2>
                <p>Take a break and come back when you're ready</p>
                <button class="btn btn-primary" id="resumeBtn">
                    <i class="fas fa-play"></i> Resume Game
                </button>
            </div>
        </div>

        <!-- Theme Settings Modal -->
        <div class="modal" id="themeModal">
            <div class="modal-content" style="max-width:500px">
                <div class="modal-header">
                    <h2><i class="fas fa-palette"></i> Choose Theme</h2>
                </div>
                <div class="modal-body">
                    <div class="theme-grid">
                        <div class="theme-option" data-theme="light">
                            <div class="theme-preview light-preview">
                                <div class="preview-header"></div>
                                <div class="preview-grid"></div>
                            </div>
                            <div class="theme-name">Light</div>
                        </div>
                        <div class="theme-option" data-theme="dark">
                            <div class="theme-preview dark-preview">
                                <div class="preview-header"></div>
                                <div class="preview-grid"></div>
                            </div>
                            <div class="theme-name">Dark</div>
                        </div>
                        <div class="theme-option" data-theme="solarized">
                            <div class="theme-preview solarized-preview">
                                <div class="preview-header"></div>
                                <div class="preview-grid"></div>
                            </div>
                            <div class="theme-name">Solarized</div>
                        </div>
                        <div class="theme-option" data-theme="pastel">
                            <div class="theme-preview pastel-preview">
                                <div class="preview-header"></div>
                                <div class="preview-grid"></div>
                            </div>
                            <div class="theme-name">Pastel</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeTheme">Close</button>
                </div>
            </div>
        </div>

        <!-- Daily Challenge Modal -->
        <div class="modal" id="dailyModal">
            <div class="modal-content daily-challenge-modal">
                <div class="modal-header">
                    <h2><i class="fas fa-calendar-star"></i> Daily Challenge</h2>
                    <div class="daily-date" id="dailyDate"></div>
                </div>
                <div class="modal-body">
                    <div class="daily-info">
                        <div class="daily-stats">
                            <div class="daily-stat">
                                <div class="stat-icon"><i class="fas fa-fire"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dailyStreak">0</div>
                                    <div class="stat-label">Day Streak</div>
                                </div>
                            </div>
                            <div class="daily-stat">
                                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dailyBestTime">--:--</div>
                                    <div class="stat-label">Best Time</div>
                                </div>
                            </div>
                            <div class="daily-stat">
                                <div class="stat-icon"><i class="fas fa-star"></i></div>
                                <div class="stat-info">
                                    <div class="stat-value" id="dailyBestScore">0</div>
                                    <div class="stat-label">Best Score</div>
                                </div>
                            </div>
                        </div>
                        <div class="daily-description">
                            <p>Complete today's unique Sudoku challenge! Everyone gets the same puzzle worldwide.</p>
                            <div class="daily-difficulty">
                                <span class="difficulty-badge" id="dailyDifficultyBadge">Medium</span>
                                <span class="daily-reward">+50% Bonus Points</span>
                            </div>
                        </div>
                        <div class="daily-status" id="dailyStatus"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="startDaily">
                        <i class="fas fa-play"></i> Start Challenge
                    </button>
                    <button class="btn btn-secondary" id="closeDaily">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="sounds.js"></script>
    <script src="script.js"></script>
</body>
</html>
