<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Master</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-th"></i> Sudoku Master</h1>
            <div class="header-controls">
                <div class="timer">
                    <i class="fas fa-clock"></i>
                    <span id="timer">00:00</span>
                </div>
                <div class="player-info">
                    <div class="player-name" title="Current player">
                        <i class="fas fa-user"></i>
                        <span id="currentPlayerName">—</span>
                    </div>
                    <div class="best-time" title="Best time for this player">
                        <i class="fas fa-trophy"></i>
                        <span id="bestTime">—</span>
                    </div>
                    <button class="btn btn-secondary btn-compact" id="openDashboard" title="Open dashboard">
                        <i class="fas fa-chart-pie"></i>
                        Dashboard
                    </button>
                    <button class="btn btn-secondary btn-compact" id="authButton" title="Login or Register">
                        <i class="fas fa-right-to-bracket"></i>
                        Login
                    </button>
                    <button class="btn btn-danger btn-compact" id="logoutButton" title="Logout" style="display:none">
                        <i class="fas fa-right-from-bracket"></i>
                        Logout
                    </button>
                </div>
                <div class="difficulty-selector">
                    <label for="difficulty">Difficulty:</label>
                    <select id="difficulty">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                        <option value="expert">Expert</option>
                    </select>
                </div>
                <div class="difficulty-selector" title="Play today's daily puzzle">
                    <button class="btn btn-secondary btn-compact" id="dailyPuzzleBtn">
                        <i class="fas fa-calendar-day"></i> Daily Puzzle
                    </button>
                </div>
                
            </div>
        </header>

        <main class="game-container">
            <div id="dailyQuizBanner" class="info-banner" style="display:none"></div>
            <div class="game-board">
                <div class="sudoku-grid" id="sudokuGrid"></div>
            </div>
            
            <div class="game-controls">
                <div class="number-pad">
                    <button class="number-btn" data-number="1">1</button>
                    <button class="number-btn" data-number="2">2</button>
                    <button class="number-btn" data-number="3">3</button>
                    <button class="number-btn" data-number="4">4</button>
                    <button class="number-btn" data-number="5">5</button>
                    <button class="number-btn" data-number="6">6</button>
                    <button class="number-btn" data-number="7">7</button>
                    <button class="number-btn" data-number="8">8</button>
                    <button class="number-btn" data-number="9">9</button>
                    <button class="number-btn clear" data-number="0">
                        <i class="fas fa-eraser"></i>
                    </button>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="newGame">
                        <i class="fas fa-plus"></i> New Game
                    </button>
                    <button class="btn btn-secondary" id="hint">
                        <i class="fas fa-lightbulb"></i> Hint
                    </button>
                    <button class="btn btn-secondary" id="solve">
                        <i class="fas fa-magic"></i> Solve
                    </button>
                    <button class="btn btn-danger" id="reset">
                        <i class="fas fa-undo"></i> Reset
                    </button>
                    <button class="btn btn-secondary" id="openAchievements2">
                        <i class="fas fa-medal"></i> Achievements
                    </button>
                    <button class="btn btn-secondary" id="openLeaderboard2">
                        <i class="fas fa-crown"></i> Leaderboard
                    </button>
                </div>
            </div>
        </main>

        <div class="game-info">
            <div class="stats">
                <div class="stat">
                    <span class="stat-label">Mistakes:</span>
                    <span class="stat-value" id="mistakes">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Hints Used:</span>
                    <span class="stat-value" id="hintsUsed">0</span>
                </div>
            </div>
        </div>

        <!-- Modal for game completion -->
        <div class="modal" id="completionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-trophy"></i> Congratulations!</h2>
                </div>
                <div class="modal-body">
                    <p>You completed the Sudoku puzzle!</p>
                    <div class="completion-stats">
                        <div class="completion-stat">
                            <span>Time:</span>
                            <span id="finalTime">00:00</span>
                        </div>
                        <div class="completion-stat">
                            <span>Mistakes:</span>
                            <span id="finalMistakes">0</span>
                        </div>
                        <div class="completion-stat">
                            <span>Hints Used:</span>
                            <span id="finalHints">0</span>
                        </div>
                        <div class="completion-stat">
                            <span>Score:</span>
                            <span id="finalScore">0</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="playAgain">Play Again</button>
                    <button class="btn btn-secondary" id="closeModal">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Auth Modal -->
        <div class="modal" id="authModal">
            <div class="modal-content" style="max-width:480px">
                <div class="modal-header">
                    <h2><i class="fas fa-user-lock"></i> Account</h2>
                </div>
                <div class="modal-body">
                    <div class="leaderboard-tabs" style="justify-content:center">
                        <button class="tab-btn active" data-auth-tab="login">Login</button>
                        <button class="tab-btn" data-auth-tab="register">Register</button>
                    </div>
                    <form id="loginForm" class="auth-form" autocomplete="on">
                        <div class="form-field">
                            <input id="loginUsername" type="text" placeholder="Username" required>
                        </div>
                        <div class="form-field">
                            <input id="loginPassword" type="password" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">
                            <i class="fas fa-right-to-bracket"></i> Login
                        </button>
                    </form>
                    <form id="registerForm" class="auth-form" style="display:none" autocomplete="on">
                        <div class="form-field">
                            <input id="regUsername" type="text" placeholder="Username" required>
                        </div>
                        <div class="form-field">
                            <input id="regPassword" type="password" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn btn-secondary" style="width:100%">
                            <i class="fas fa-user-plus"></i> Create Account
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeAuth">Close</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Modal -->
        <div class="modal" id="dashboardModal">
            <div class="modal-content achievements-content">
                <div class="modal-header">
                    <h2><i class="fas fa-chart-pie"></i> Dashboard</h2>
                </div>
                <div class="modal-body">
                    <div style="display:grid;gap:16px">
                        <div>
                            <canvas id="difficultyChart" height="180"></canvas>
                        </div>
                        <div class="completion-stats">
                            <div class="completion-stat"><span>Daily Streak:</span><span id="dailyStreak">0</span></div>
                            <div class="completion-stat"><span>Total Score:</span><span id="totalScore">0</span></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeDashboard">Close</button>
                </div>
            </div>
        </div>

        <!-- Achievements Modal -->
        <div class="modal" id="achievementsModal">
            <div class="modal-content achievements-content">
                <div class="modal-header">
                    <h2><i class="fas fa-medal"></i> Achievements</h2>
                </div>
                <div class="modal-body">
                    <div id="achievementsList" class="achievements-list"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeAchievements">Close</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div class="modal" id="leaderboardModal">
            <div class="modal-content leaderboard-content">
                <div class="modal-header">
                    <h2><i class="fas fa-crown"></i> Leaderboard</h2>
                </div>
                <div class="modal-body">
                    <div class="leaderboard-tabs">
                        <button class="tab-btn active" data-diff="easy">Easy</button>
                        <button class="tab-btn" data-diff="medium">Medium</button>
                        <button class="tab-btn" data-diff="hard">Hard</button>
                        <button class="tab-btn" data-diff="expert">Expert</button>
                    </div>
                    <div id="leaderboardList" class="leaderboard-list"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="closeLeaderboard">Close</button>
                </div>
            </div>
        </div>
        
        <!-- Daily Puzzle Modal -->
        <div class="modal" id="dailyModal">
            <div class="modal-content" style="max-width:520px">
                <div class="modal-header">
                    <h2><i class="fas fa-calendar-day"></i> Daily Puzzle</h2>
                </div>
                <div class="modal-body">
                    <p>Today's Sudoku is ready. You'll see one highlighted cell. Enter the correct number for that cell to complete the quiz.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" id="startDaily">Start</button>
                    <button class="btn btn-secondary" id="closeDaily">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
